/* Toastmasters Brand Palette & Typography */
:root { --tm-navy:#004165; --tm-burgundy:#772432; --tm-gold:#C49102; --tm-cool-gray:#A9B2B1; --tm-gray-50:#f4f6f7; --tm-gray-800:#1d1f21; --brand:var(--tm-burgundy); --brand-accent:var(--tm-navy); --brand-alt:var(--tm-gold); --bg: #f8f9fa; --bg-alt:#ffffff; --text:#1d1f1f; --text-dim:#555; --border:#e1e3e6; --radius:14px; --focus: 2px solid var(--brand); --shadow-sm:0 1px 2px rgba(0,0,0,.08); --shadow:0 4px 12px -2px rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.06); --font-heading:"Montserrat","Gotham","Avenir Next","Segoe UI",system-ui,sans-serif; --font-body:"Source Sans 3","Arial","Helvetica",system-ui,sans-serif; }
[data-theme="dark"] { --bg:#161617; --bg-alt:#1f1f21; --text:#f5f5f7; --text-dim:#bbb; --border:#2c2c2e; --shadow:0 4px 14px -2px rgba(0,0,0,.6); }
* { box-sizing:border-box; }
html,body { margin:0; padding:0; font-family: var(--font-body); background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; }
body { min-height:100dvh; display:grid; grid-template-columns:auto 1fr; grid-template-rows:auto 1fr; grid-template-areas:"header header" "sidebar main"; }
:focus-visible { outline:var(--focus); outline-offset:2px; border-radius:4px; }

.app-header { grid-area:header; display:flex; align-items:center; gap:.75rem; padding:.6rem 1rem; background:var(--bg-alt); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:40; }
.app-header h1 { font-size:1.05rem; letter-spacing:.5px; margin:0; font-weight:700; font-family:var(--font-heading); }
.spacer { flex:1; }
.icon-btn { background:none; border:1px solid var(--border); border-radius:50%; width:40px; height:40px; display:grid; place-items:center; font-size:1.15rem; cursor:pointer; transition:background .2s,border-color .2s; }
.icon-btn:hover { background:var(--bg-alt); }
.icon-btn:active { transform:translateY(1px); }

.sidebar { grid-area:sidebar; width:250px; background:var(--bg-alt); border-right:1px solid var(--border); padding:1rem .75rem 2rem; display:flex; flex-direction:column; gap:1rem; position:sticky; top:56px; max-height:calc(100dvh - 56px); overflow-y:auto; transition:transform .35s ease; }
.sidebar[data-collapsed] { transform:translateX(-100%); }
.sidebar nav ul { list-style:none; margin:0; padding:0; display:grid; gap:.25rem; }
.nav-link { width:100%; text-align:left; background:none; border:1px solid transparent; padding:.65rem .75rem; border-radius:8px; cursor:pointer; font-size:.95rem; font-weight:500; color:var(--text-dim); display:flex; gap:.5rem; align-items:center; }
.nav-link[aria-current="page"], .nav-link:hover { background:linear-gradient(135deg,var(--brand) 0%,var(--brand-accent) 120%); color:#fff; box-shadow:var(--shadow-sm); }
.resource-toggle { width:auto; display:inline-block; }
.section-controls { margin:.25rem 0 1rem; }
.back-btn { background:none; border:1px solid var(--border); padding:.45rem .8rem; border-radius:20px; font-size:.75rem; font-weight:600; letter-spacing:.5px; cursor:pointer; color:var(--text-dim); display:inline-flex; align-items:center; gap:.35rem; }
.back-btn:hover { background:var(--bg-alt); color:var(--text); }
.club-filters { display:flex; flex-wrap:wrap; gap:1rem; margin:.75rem 0 1rem; background:var(--bg-alt); padding:.75rem 1rem; border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow-sm); }
.club-filters label { display:flex; flex-direction:column; gap:.35rem; font-size:.65rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; color:var(--text-dim); min-width:110px; }
.club-filters input, .club-filters select { font:inherit; padding:.45rem .55rem; border:1px solid var(--border); border-radius:8px; background:var(--bg); color:inherit; }
.clubs-status { font-size:.75rem; color:var(--text-dim); margin:.25rem 0 .75rem; }
.clubs-table-wrap { overflow:auto; max-height:60vh; border:1px solid var(--border); border-radius:var(--radius); background:var(--bg-alt); box-shadow:var(--shadow-sm); }
.clubs-table { width:100%; border-collapse:collapse; font-size:.75rem; }
.clubs-table th, .clubs-table td { padding:.4rem .55rem; border-bottom:1px solid var(--border); text-align:left; }
.clubs-table thead th { position:sticky; top:0; background:var(--bg-alt); z-index:1; font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; }
.clubs-table tbody tr:nth-child(even){ background:rgba(0,0,0,.025); }
.clubs-table tbody tr:hover { background:rgba(119,36,50,.08); cursor:pointer; }
.clubs-table tbody td { white-space:nowrap; }

/* Why Toastmasters section */
.benefits-grid { --min:260px; display:grid; gap:1.25rem; grid-template-columns:repeat(auto-fit,minmax(var(--min),1fr)); margin:0 0 2rem; }
.benefit-card { background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:1rem 1rem .9rem; position:relative; display:flex; flex-direction:column; gap:.5rem; box-shadow:var(--shadow-sm); }
.benefit-card h3 { margin:0 0 .25rem; font-size:1.05rem; }
.benefit-card p { margin:0 0 .35rem; font-size:.85rem; line-height:1.3; }
.benefit-card details { margin-top:auto; }
.benefit-card details summary { cursor:pointer; font-weight:600; }
.benefit-badge { position:absolute; top:.65rem; right:.65rem; background:linear-gradient(145deg,var(--brand) 0%,var(--brand-accent) 90%); color:#fff; width:1.9rem; height:1.9rem; display:grid; place-items:center; font-size:.75rem; font-weight:600; border-radius:50%; box-shadow:0 0 0 3px var(--bg-alt); }
.benefit-cta { background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:1.25rem 1.1rem; box-shadow:var(--shadow-sm); }
.benefit-cta h3 { margin:.1rem 0 .75rem; }

.view-frame { grid-area:main; padding:1.25rem clamp(.75rem,2.5vw,2rem) 3rem; overflow-y:auto; }
.view-frame section { margin:0 0 2.5rem; }
[data-screen] { display:none; }
[data-screen].active { display:block; }
.view-frame h2 { margin-top:0; font-size:1.4rem; letter-spacing:.5px; font-family:var(--font-heading); font-weight:700; }
.view-frame h3, .card h3, .role-card h3, .benefit-card h3, .benefit-cta h3 { font-family:var(--font-heading); font-weight:600; }
.muted { color:var(--text-dim); font-size:.9rem; }

.grid { display:grid; gap:1rem; }
.grid.auto-fit { grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
.cards .card { background:var(--bg-alt); border:1px solid var(--border); padding:1rem 1rem 1.15rem; border-radius:var(--radius); display:flex; flex-direction:column; gap:.5rem; position:relative; isolation:isolate; box-shadow:var(--shadow-sm); }
.card h3 { margin:0 0 .25rem; font-size:1.05rem; }
.card p { margin:0 0 .25rem; font-size:.9rem; line-height:1.35; }
.card .primary { margin-top:auto; }

.primary { --btn-bg:var(--brand); --btn-bg-hover:var(--brand-accent); background:var(--btn-bg); color:#fff; border:none; border-radius:8px; padding:.55rem .95rem; font-size:.9rem; font-weight:600; cursor:pointer; box-shadow:var(--shadow-sm); letter-spacing:.35px; text-decoration:none; display:inline-block; font-family:var(--font-heading); }
.primary:hover { background:var(--btn-bg-hover); }
.primary:focus-visible { outline:2px solid var(--brand-alt); outline-offset:2px; }

.controls { display:flex; flex-wrap:wrap; gap:.6rem; margin:.75rem 0 1rem; }
.controls button { border:1px solid var(--border); background:var(--bg-alt); border-radius:8px; padding:.55rem .9rem; cursor:pointer; }
.controls button.primary { border:none; }
.controls button:hover:not(.primary) { background:var(--bg); }

.role-grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
.role-card { background:var(--bg-alt); border:1px solid var(--border); padding:1rem 1rem 1rem; border-radius:var(--radius); display:flex; flex-direction:column; gap:.55rem; box-shadow:var(--shadow-sm); }
.role-card header { display:flex; align-items:center; gap:.5rem; }
.role-card h3 { margin:0; font-size:1rem; }
.role-card .tag { font-size:.65rem; text-transform:uppercase; letter-spacing:1px; padding:.25rem .45rem; background:linear-gradient(135deg,var(--brand),var(--brand-accent)); color:#fff; border-radius:4px; font-family:var(--font-heading); }
.role-card details { margin-top:.25rem; }
.role-card details summary { cursor:pointer; font-weight:600; }

.topics-list { display:grid; gap:.75rem; counter-reset:topic; padding-left:1.25rem; }
.topics-list li { position:relative; background:var(--bg-alt); padding:.75rem .9rem; border:1px solid var(--border); border-radius:10px; list-style:none; box-shadow:var(--shadow-sm); opacity:0; transform:translateY(6px); animation:fadeIn .4s forwards; }
.topics-list li.revealed { outline:1px solid var(--brand); }
.topics-list li::before { counter-increment:topic; content:counter(topic) "."; position:absolute; left:-1.25rem; top:.8rem; font-weight:600; color:var(--brand); }

.wod-card, .theme-card { background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:1rem 1.15rem; min-height:140px; display:flex; flex-direction:column; gap:.5rem; box-shadow:var(--shadow-sm); }
.wod-card h3 { margin:.25rem 0 0; font-size:1.35rem; }
.wod-card p { margin:.15rem 0; font-size:.95rem; line-height:1.3; }
.wod-card .pos { font-size:.7rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; color:var(--brand-accent); }
.theme-card h3 { margin:.25rem 0 0; font-size:1.2rem; }
.theme-card p { margin:.4rem 0 0; font-size:.95rem; }

.timer-form { display:grid; gap:1rem; max-width:520px; background:var(--bg-alt); padding:1rem 1.15rem 1.25rem; border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow-sm); }
.timer-form label { display:flex; flex-direction:column; gap:.35rem; font-size:.8rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; color:var(--text-dim); }
.timer-form select, .timer-form input { font:inherit; padding:.55rem .65rem; border:1px solid var(--border); border-radius:8px; background:var(--bg); color:inherit; }
.timer-controls { display:flex; gap:.6rem; }
.timer-display { margin:1rem 0 0; font-size:clamp(2.8rem, 10vw, 5rem); font-weight:700; font-variant-numeric:tabular-nums; letter-spacing:1px; padding:.75rem 1.15rem; border-radius:var(--radius); background:var(--bg-alt); border:4px solid var(--border); width:fit-content; min-width:300px; box-shadow:0 0 0 6px var(--bg); position:relative; }
.timer-display[data-phase="green"] { border-color:#0a9948; }
.timer-display[data-phase="yellow"] { border-color:#d9a400; }
.timer-display[data-phase="red"] { border-color:#c62828; }

.resource-list { display:grid; gap:.65rem; padding-left:1rem; }
.resource-list li { background:var(--bg-alt); border:1px solid var(--border); padding:.6rem .75rem .7rem; border-radius:9px; list-style:none; box-shadow:var(--shadow-sm); }
.resource-list a { text-decoration:none; color:var(--brand); font-weight:600; }
.resource-list a:hover { text-decoration:underline; }

.toast { position:fixed; left:50%; bottom:1.25rem; transform:translateX(-50%) translateY(20px); background:#1f1f21; color:#fff; padding:.75rem 1rem; border-radius:12px; box-shadow:var(--shadow); font-size:.85rem; opacity:0; pointer-events:none; transition:opacity .35s, transform .35s; z-index:100; }
.toast[data-show] { opacity:1; transform:translateX(-50%) translateY(0); }

/* Collapsible resources */
#resourceSection.collapsed #resourceList { display:none; }
#resourceSection [data-action="toggle-resources"] { position:relative; padding-left:1.2rem; }
#resourceSection [data-action="toggle-resources"]::before { content:'▼'; position:absolute; left:0; top:50%; transform:translateY(-50%); font-size:.85rem; }
#resourceSection.collapsed [data-action="toggle-resources"]::before { content:'▶'; }

/* Analytics panel */
.analytics-controls { margin-top:.25rem; }
.analytics-toggle-label { display:flex; align-items:center; gap:.5rem; font-size:.85rem; }
#analyticsPanel { margin-top:.5rem; }
#analyticsData { max-height:260px; overflow:auto; background:#111; color:#f5f5f7; padding:.75rem; border-radius:8px; font-size:.7rem; }

@media (max-width: 880px){ body { grid-template-columns:1fr; grid-template-areas:"header" "main"; }
  .sidebar { position:fixed; inset:56px 0 0 0; width:240px; max-width:70%; transform:translateX(-100%); z-index:99; box-shadow:var(--shadow); }
  .sidebar:not([data-collapsed]) { transform:translateX(0); }
}
@media (max-width:600px){ .cards .card { padding:.9rem .85rem 1rem; } .role-grid { grid-template-columns:1fr; } .timer-display { min-width:0; width:100%; } }
@keyframes fadeIn { to { opacity:1; transform:translateY(0);} }
@media (prefers-reduced-motion: reduce){
  * { animation-duration:0.001ms !important; animation-iteration-count:1 !important; transition:none !important; }
  .topics-list li { opacity:1 !important; transform:none !important; }
}

/* Floating back button (mobile) */
.fab-back { position:fixed; bottom:1rem; right:1rem; width:52px; height:52px; border-radius:50%; border:none; background:linear-gradient(135deg,var(--brand),var(--brand-accent)); color:#fff; font-size:1.4rem; display:grid; place-items:center; box-shadow:0 6px 18px -4px rgba(0,0,0,.4); cursor:pointer; z-index:120; transition:transform .25s, box-shadow .25s, opacity .25s; }
.fab-back:hover { transform:translateY(-3px); box-shadow:0 10px 24px -6px rgba(0,0,0,.45); }
.fab-back:active { transform:translateY(-1px); }
.fab-back[hidden] { display:none; }
@media (min-width: 881px){ .fab-back { display:none !important; } }
